# –ü—Ä–∞–∫—Ç–∏–∫–∞ 2-2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
–ò–∑—É—á–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–Ω–∫–∏ (race condition) –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ —Å –ø–æ–º–æ—â—å—é –º—å—é—Ç–µ–∫—Å–æ–≤.
–í–∞—Ä–∏–∞–Ω—Ç 1: –ò–º–µ–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è counter = 0. –°–æ–∑–¥–∞—Ç—å 5 –ø–æ—Ç–æ–∫–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç counter –Ω–∞ 1 –≤ —Ç–µ—á–µ–Ω–∏–µ 1000 –∏—Ç–µ—Ä–∞—Ü–∏–π. –ü–æ–∫–∞–∑–∞—Ç—å:
1. –†–µ–∑—É–ª—å—Ç–∞—Ç –ë–ï–ó –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º—å—é—Ç–µ–∫—Å–∞ (–±—É–¥–µ—Ç –º–µ–Ω—å—à–µ 5000 –∏–∑-–∑–∞ race condition)
2. –†–µ–∑—É–ª—å—Ç–∞—Ç –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º—å—é—Ç–µ–∫—Å–∞ (—Ç–æ—á–Ω–æ 5000)

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pthread_mutex_t –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –§—É–Ω–∫—Ü–∏–∏: pthread_mutex_init(), pthread_mutex_lock(), pthread_mutex_unlock(), pthread_mutex_destroy()
- –ö–æ–º–ø–∏–ª—è—Ü–∏—è: gcc -pthread -o task task.c

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã:
   ```bash
   gcc -pthread -o task task.c
   ```
2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
   ```bash
   ./task
   ```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
```
–ë–µ–∑ –º—å—é—Ç–µ–∫—Å–∞:
–û–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 5000
–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 4873
–ü–æ—Ç–µ—Ä—è–Ω–æ: 127 –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–æ–≤

–° –º—å—é—Ç–µ–∫—Å–æ–º:
–û–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 5000
–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 5000
–í—Å–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```
